import{h as i,j as g,t as u}from"./chunk-EXH2BBGN.js";import{A as l,P as p,T as a,U as c,o as r,oa as m,s as n}from"./chunk-AMTD2DMX.js";var f=class o{constructor(t,e){this.http=t;this.router=e}platformId=c(m);registerUrl="http://34.40.114.86:8000/api/register/";passwordResetBaseUrl="http://34.40.114.86:8000/api/password-reset/";register(t,e,s){return this.http.post(this.registerUrl,{email:t,password:e,password2:s})}requestPasswordReset(t){return this.http.post(`${this.passwordResetBaseUrl}request-password-reset/`,{email:t})}confirmPasswordReset(t){return this.http.post(`${this.passwordResetBaseUrl}confirm-password-reset/`,t)}validateToken(t,e){return this.http.post("http://localhost:8000/api/validate-token/",{token:t,ID:parseInt(e,10)})}isLoggedIn(){if(i(this.platformId)){let t=localStorage.getItem("authToken"),e=localStorage.getItem("userId");return!t?.trim()||!e?.trim()?r(!1):this.validateToken(t,e).pipe(n(s=>s.success===!0?!0:(this.clearLocalStorage(),!1)),l(()=>(this.clearLocalStorage(),r(!1))))}return r(!1)}clearLocalStorage(){localStorage.removeItem("authToken"),localStorage.removeItem("userId"),localStorage.removeItem("userEmail")}logOut(){i(this.platformId)&&(localStorage.removeItem("authToken"),localStorage.removeItem("userEmail"),localStorage.removeItem("userId")),this.router.navigate(["/login"])}login(t,e){return this.http.post("http://localhost:8000/api/login/",{email:t,password:e})}static \u0275fac=function(e){return new(e||o)(a(g),a(u))};static \u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"})};export{f as a};
