import{a as k}from"./chunk-5DBMA7CM.js";import{a as I,b as T,c as E,d as L,e as R,f as N,h as A}from"./chunk-UAN5FHOK.js";import{e as b,j as O,r as y,t as S}from"./chunk-EXH2BBGN.js";import{Da as C,Ha as f,Qa as d,Ra as n,Sa as i,Ta as p,Xa as m,Ya as M,bb as s,cb as P,eb as u,fb as h,gb as _,hb as x,qb as w,sa as v,ta as g,ya as c}from"./chunk-AMTD2DMX.js";function W(l,e){if(l&1&&(n(0,"div",12),s(1),i()),l&2){let o=M();g(),P(o.errorMessage)}}function D(l,e){l&1&&(n(0,"article",13),p(1,"article",14),n(2,"main"),p(3,"img",15),n(4,"p"),s(5,"Activation success!"),i()()())}var j=class l{constructor(e,o,t,a,r){this.authService=e;this.router=o;this.cdr=t;this.route=a;this.http=r}email="";password="";showPassword=!1;errorMessage="";showToast=!1;ngOnInit(){this.route.queryParams.subscribe(e=>{let o=e.uidb64,t=e.token;if(o&&t){let a=`http://localhost:8000/api/activate/${o}/${t}/`;this.http.get(a).subscribe({next:()=>{this.showToast=!0,this.cdr.detectChanges(),setTimeout(()=>{this.showToast=!1,this.cdr.detectChanges()},3e3)},error:r=>{console.error("Activation failed:",r)}})}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}logIn(){this.authService.login(this.email,this.password).subscribe({next:e=>{localStorage.setItem("authToken",e.token),localStorage.setItem("userEmail",e.email),localStorage.setItem("userId",e.user_id),this.errorMessage="",this.router.navigate(["/dashboard"])},error:e=>{e.status===400?(this.errorMessage=typeof e.error=="string"?e.error:JSON.stringify(e.error),typeof e.error=="object"&&(this.errorMessage=Object.values(e.error).flat().join(" "),this.cdr.detectChanges())):this.errorMessage="ERROR"}})}goToForgotPassword(){this.router.navigate(["/forgot-password"],{queryParams:{email:this.email}})}goToSignUp(){this.router.navigate(["/signup"],{queryParams:{email:this.email}})}static \u0275fac=function(o){return new(o||l)(c(k),c(S),c(w),c(y),c(O))};static \u0275cmp=C({type:l,selectors:[["app-login"]],decls:23,vars:7,consts:[[3,"submit"],["src","../../assets/img/mail.svg","alt",""],["id","email","name","email","type","text","placeholder","Email Address",3,"ngModelChange","ngModel"],["src","../../assets/img/password.svg","alt",""],["id","password","name","password","placeholder","Enter a password",3,"ngModelChange","ngModel","type"],["alt","Toggle password visibility",2,"cursor","pointer",3,"click","src"],["class","error-message",4,"ngIf"],["type","submit"],[1,"bottom"],[1,"forgotPW",3,"click"],[1,"signUp",3,"click"],["class","toast",4,"ngIf"],[1,"error-message"],[1,"toast"],[1,"success"],["src","../../assets/img/ExclamationCircleFill.svg","alt",""]],template:function(o,t){o&1&&(n(0,"div")(1,"h1"),s(2,"Log in"),i(),n(3,"form",0),m("submit",function(){return t.logIn()}),n(4,"div"),p(5,"img",1),n(6,"input",2),_("ngModelChange",function(r){return h(t.email,r)||(t.email=r),r}),i()(),n(7,"div"),p(8,"img",3),n(9,"input",4),_("ngModelChange",function(r){return h(t.password,r)||(t.password=r),r}),i(),n(10,"img",5),m("click",function(){return t.togglePasswordVisibility()}),i()(),f(11,W,2,1,"div",6),n(12,"button",7),s(13,"Log in"),i()(),n(14,"footer",8)(15,"p",9),m("click",function(){return t.goToForgotPassword()}),s(16,"Forgot password?"),i(),n(17,"span")(18,"p"),s(19,"New to Videoflix?"),i(),n(20,"p",10),m("click",function(){return t.goToSignUp()}),s(21,"Sign Up now"),i()()(),f(22,D,6,0,"article",11),i()),o&2&&(g(6),u("ngModel",t.email),g(3),u("ngModel",t.password),d("type",t.showPassword?"text":"password"),g(),d("src",x("../../assets/img/",t.showPassword?"visibility_off":"visibility",".svg"),v),g(),d("ngIf",t.errorMessage),g(11),d("ngIf",t.showToast))},dependencies:[A,N,I,T,E,R,L,b],styles:["div[_ngcontent-%COMP%]{border-radius:48px;background-color:#1b1b22d9;height:auto;width:calc(100vw - 144px);max-height:410px;max-width:408px;display:flex;flex-direction:column;align-items:center;padding-inline:56px;padding-block:43px;gap:32px}div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;font-size:48px;font-weight:700;color:#fff;text-align:center}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:32px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-direction:row;height:23px;max-width:408px;border:1px solid #2e3edf;border-radius:12px;padding-inline:24px;padding-block:12px;display:flex;align-items:center;gap:12px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px;width:24px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;outline:none;color:#d3d3d3;font-size:18px;font-weight:400;width:100%}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#d3d3d3}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px;background-color:#2e3edf;border:none;border-radius:40px;padding-inline:24px;padding-block:12px;gap:10px;font-size:18px;font-weight:700;color:#fff}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#3d4dfc}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{border:none;background-color:transparent;height:10px;color:#ff4d4f;padding:0;margin:-21px -21px -21px -65px}.bottom[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#fff;gap:16px;margin-top:-16px}.bottom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;gap:16px;flex-direction:row}.bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:18px;margin:0}.bottom[_ngcontent-%COMP%]   .signUp[_ngcontent-%COMP%]{font-weight:700}.bottom[_ngcontent-%COMP%]   .signUp[_ngcontent-%COMP%]:hover, .bottom[_ngcontent-%COMP%]   .forgotPW[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}@media (max-width: 720px){h1[_ngcontent-%COMP%]{font-size:40px!important}}"]})};export{j as Login};
