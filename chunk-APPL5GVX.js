import{a as N}from"./chunk-5DBMA7CM.js";import{a as z,b as V,c as A,d as D,e as W,f as Z,h as j}from"./chunk-UAN5FHOK.js";import{e as k,g as T,r as E,t as I}from"./chunk-EXH2BBGN.js";import{Da as x,Ha as _,Ka as O,Qa as c,Ra as t,Sa as i,Ta as l,Wa as b,Xa as m,Ya as w,Z as M,_ as v,bb as p,cb as y,db as S,eb as h,fb as u,gb as P,hb as C,qb as R,sa as f,ta as r,ya as g}from"./chunk-AMTD2DMX.js";function U(s,o){if(s&1&&(t(0,"div",8),l(1,"img",9),p(2),i()),s&2){let n=w();r(2),S(" ",n.passwordError," ")}}function B(s,o){if(s&1){let n=b();t(0,"article",10),l(1,"article",11),t(2,"main"),l(3,"img",12),t(4,"p"),p(5),i(),t(6,"aside")(7,"img",13),m("click",function(){M(n);let d=w();return v(d.closeToast())}),i()()()()}if(s&2){let n=w();r(5),y(n.toastMessage)}}var F=class s{constructor(o,n,e,d,a){this.route=o;this.router=n;this.authService=e;this.cdr=d;this.ngZone=a}password="";repeatedPassword="";showPassword=!1;uid="";token="";toastMessage="";showToast=!1;passwordError="";ngOnInit(){this.route.params.subscribe(o=>{this.uid=o.uid,this.token=o.token})}togglePasswordVisibility(){this.showPassword=!this.showPassword}resetPw(){if(this.passwordError="",this.password!==this.repeatedPassword){this.passwordError="Passwords must match.",this.cdr.detectChanges();return}let o={uid:this.uid,token:this.token,new_password:this.password,new_password_confirm:this.repeatedPassword};this.authService.confirmPasswordReset(o).subscribe({next:()=>{this.showToastMessage("Passwort erfolgreich ge\xE4ndert."),setTimeout(()=>this.router.navigate(["/login"]),2e3)},error:n=>{console.error(n);let e=n?.error?.detail||"Fehler beim Zur\xFCcksetzen des Passworts.";this.showToastMessage(e)}})}showToastMessage(o){this.ngZone.run(()=>{this.toastMessage=o,this.showToast=!0,this.cdr.detectChanges()})}closeToast(){this.showToast=!1,this.cdr.detectChanges()}static \u0275fac=function(n){return new(n||s)(g(E),g(I),g(N),g(R),g(O))};static \u0275cmp=x({type:s,selectors:[["app-password-reset"]],decls:18,vars:10,consts:[[3,"ngSubmit"],["src","../../assets/img/password.svg","alt",""],["id","password","name","password","placeholder","Enter a password",3,"ngModelChange","type","ngModel"],["alt","Toggle password visibility",2,"cursor","pointer",3,"click","src"],["id","repeatedPassword","name","repeatedPassword","placeholder","Confirm Password",3,"ngModelChange","type","ngModel"],["class","error-message",4,"ngIf"],["type","submit"],["class","toast",4,"ngIf"],[1,"error-message"],["src","../../assets/img/warning.svg","alt","",1,"warning"],[1,"toast"],[1,"error"],["src","../../assets/img/ExclamationCircleFill.svg","alt",""],["src","../../assets/img/close_small.svg","alt","",3,"click"]],template:function(n,e){n&1&&(t(0,"div")(1,"h1"),p(2,"Reset password"),i(),t(3,"p"),p(4,"Create a new password for your Videoflix account."),i(),t(5,"form",0),m("ngSubmit",function(){return e.resetPw()}),t(6,"div"),l(7,"img",1),t(8,"input",2),P("ngModelChange",function(a){return u(e.password,a)||(e.password=a),a}),i(),t(9,"img",3),m("click",function(){return e.togglePasswordVisibility()}),i()(),t(10,"div"),l(11,"img",1),t(12,"input",4),P("ngModelChange",function(a){return u(e.repeatedPassword,a)||(e.repeatedPassword=a),a}),i(),t(13,"img",3),m("click",function(){return e.togglePasswordVisibility()}),i()(),_(14,U,3,1,"div",5),t(15,"button",6),p(16,"Reset my password"),i()(),_(17,B,8,1,"article",7),i()),n&2&&(r(8),c("type",e.showPassword?"text":"password"),h("ngModel",e.password),r(),c("src",C("../../assets/img/",e.showPassword?"visibility_off":"visibility",".svg"),f),r(3),c("type",e.showPassword?"text":"password"),h("ngModel",e.repeatedPassword),r(),c("src",C("../../assets/img/",e.showPassword?"visibility_off":"visibility",".svg"),f),r(),c("ngIf",e.passwordError),r(3),c("ngIf",e.showToast))},dependencies:[j,Z,z,V,A,W,D,T,k],styles:["div[_ngcontent-%COMP%]{border-radius:48px;background-color:#1b1b22d9;height:auto;width:calc(100vw - 144px);max-height:410px;max-width:408px;display:flex;flex-direction:column;align-items:center;padding-inline:56px;padding-block:43px;gap:32px}div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;font-size:48px;font-weight:700;color:#fff;text-align:center}div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#fff;font-weight:400;text-align:center}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:32px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-direction:row;height:23px;max-width:408px;border:1px solid #2e3edf;border-radius:12px;padding-inline:24px;padding-block:12px;display:flex;align-items:center;gap:12px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px;width:24px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;outline:none;color:#d3d3d3;font-size:18px;font-weight:400;width:100%}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#d3d3d3}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px;background-color:#2e3edf;border:none;border-radius:40px;padding-inline:24px;padding-block:12px;gap:10px;font-size:18px;font-weight:700;color:#fff}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{border:none;background-color:transparent;height:10px;color:#ff4d4f;padding:0;margin:-21px -21px -21px -65px}.bottom[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;color:#fff;gap:16px;margin-top:-16px}.bottom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;gap:16px;flex-direction:row}.bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:18px;margin:0}.bottom[_ngcontent-%COMP%]   .signUp[_ngcontent-%COMP%]{font-weight:700}.bottom[_ngcontent-%COMP%]   .signUp[_ngcontent-%COMP%]:hover, .bottom[_ngcontent-%COMP%]   .forgotPW[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.warning[_ngcontent-%COMP%]{height:12px!important;width:auto!important}@media (max-width: 720px){h1[_ngcontent-%COMP%]{font-size:40px!important}p[_ngcontent-%COMP%]{font-size:16px!important}}"]})};export{F as PasswordReset};
