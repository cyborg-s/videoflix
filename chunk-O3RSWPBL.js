import{a as I}from"./chunk-KSTDIFV6.js";import{d as E,e as L,f as D,g as S,r as T,t as z}from"./chunk-EXH2BBGN.js";import{$a as k,Da as w,Ha as h,Pa as y,Qa as c,Ra as r,Sa as a,Ta as C,U as v,Ua as M,Va as O,Wa as m,Xa as f,Ya as l,Z as _,Za as P,_ as u,_a as V,bb as p,cb as b,sa as x,ta as s}from"./chunk-AMTD2DMX.js";var R=["carousel"];function Q(i,t){if(i&1){let e=m();r(0,"button",15),f("click",function(){_(e);let o=l(3);return u(o.onPlayHeroVideo(!0))}),p(1," Weiterschauen "),a()}}function $(i,t){if(i&1){let e=m();r(0,"section",12)(1,"div",13)(2,"h1"),p(3),a(),r(4,"p"),p(5),a(),r(6,"div",14)(7,"button",15),f("click",function(){_(e);let o=l(2);return u(o.onPlayHeroVideo(!1))}),p(8," \u25B6 Play "),a(),h(9,Q,2,0,"button",16),a()()()}if(i&2){let e=l(2);s(3),b(e.heroVideo.title),s(2),b(e.heroVideo.description),s(4),c("ngIf",e.heroVideo.position_in_seconds&&e.heroVideo.position_in_seconds>0)}}function A(i,t){if(i&1){let e=m();r(0,"img",17),f("click",function(o){let d=_(e).$implicit,g=l(2);return u(g.onMovieClick(d,o))}),a()}if(i&2){let e=t.$implicit;c("src",e.img,x)("alt",e.title)}}function N(i,t){if(i&1){let e=m();r(0,"img",17),f("click",function(o){let d=_(e).$implicit,g=l(3);return u(g.onMovieClick(d,o))}),a()}if(i&2){let e=t.$implicit;c("src",e.img,x)("alt",e.title)}}function W(i,t){if(i&1&&(r(0,"section",18)(1,"h2"),p(2),a(),r(3,"div",9,0),h(5,N,1,2,"img",10),a()()),i&2){let e=t.$implicit,n=t.index;s(2),b(e.name),s(),y("data-index",n),s(2),c("ngForOf",e.movies)}}function X(i,t){if(i&1){let e=m();M(0),r(1,"img",2),f("load",function(){_(e);let o=l();return u(o.onHeroThumbnailLoad())}),a(),C(2,"div",3),r(3,"div",4),h(4,$,10,3,"section",5),r(5,"div",6),C(6,"div",7),r(7,"section",8)(8,"h2"),p(9),a(),r(10,"div",9,0),h(12,A,1,2,"img",10),a()(),h(13,W,6,3,"section",11),a()(),O()}if(i&2){let e=l();s(),c("src",e.heroVideo.thumbnail,x),s(),c("ngStyle",e.getHeroStyle()),s(2),c("ngIf",e.heroVideo),s(5),b(e.categories[0].name),s(3),c("ngForOf",e.categories[0].movies),s(),c("ngForOf",e.categories.slice(1))}}var F=class i{route=v(T);router=v(z);videoService=v(I);categories=[];heroVideo=null;heroThumbnailLoaded=!1;isDown=!1;startX=0;scrollLeft=0;activeCarousel=null;carouselsRef;ngOnInit(){let t=this.route.snapshot.data,e=t.categories?.categories||[],n=t.categories?.continueWatching||[];this.categories=e,n.length>0&&(this.categories.length===0?this.categories.push({name:"Weiterschauen",movies:n}):this.categories.splice(1,0,{name:"Weiterschauen",movies:n}));let d=this.categories.flatMap(g=>g.movies).sort((g,H)=>H.id-g.id);this.heroVideo=d[0]||null,this.heroThumbnailLoaded=!1}ngAfterViewInit(){this.carouselsRef.changes.subscribe(()=>{this.bindCarouselEvents()}),this.bindCarouselEvents()}bindCarouselEvents(){this.carouselsRef.forEach(t=>{let e=t.nativeElement;e.addEventListener("mousedown",n=>{this.isDown=!0,this.activeCarousel=e,this.activeCarousel.classList.add("active"),this.startX=n.pageX-this.activeCarousel.offsetLeft,this.scrollLeft=this.activeCarousel.scrollLeft}),e.addEventListener("mouseleave",()=>{this.activeCarousel&&this.activeCarousel.classList.remove("active"),this.isDown=!1}),e.addEventListener("mouseup",()=>{this.activeCarousel&&this.activeCarousel.classList.remove("active"),this.isDown=!1}),e.addEventListener("mousemove",n=>{if(!this.isDown||!this.activeCarousel)return;n.preventDefault();let d=(n.pageX-this.activeCarousel.offsetLeft-this.startX)*2;this.activeCarousel.scrollLeft=this.scrollLeft-d})})}onMovieClick(t,e){window.innerWidth<=720?this.router.navigate(["/video",t.id]):(this.heroVideo=t,this.heroThumbnailLoaded=!1)}onHeroThumbnailLoad(){this.heroThumbnailLoaded=!0}onPlayHeroVideo(t){if(!this.heroVideo||!this.heroVideo.id){console.warn("Kein Video zum Abspielen ausgew\xE4hlt");return}let e=t&&this.heroVideo.position_in_seconds||0;this.router.navigate(["/player",this.heroVideo.id],{queryParams:{position:e}})}getHeroStyle(){return{"background-image":`linear-gradient(180deg, rgba(20,20,20,0.6) 0%, rgba(20,20,20,0) 50%, #141414 100%), url(${this.heroVideo.img})`,"background-size":"cover","background-position":"center","background-repeat":"no-repeat"}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-dashboard"]],viewQuery:function(e,n){if(e&1&&P(R,5),e&2){let o;V(o=k())&&(n.carouselsRef=o)}},decls:1,vars:1,consts:[["carousel",""],[4,"ngIf"],[2,"display","none",3,"load","src"],[1,"hero-background",3,"ngStyle"],[1,"dashboard-content"],["class","hero",4,"ngIf"],[1,"content-with-gradient",2,"position","relative"],[1,"right-gradient"],[1,"category","first-category"],[1,"carousel"],["draggable","false",3,"src","alt","click",4,"ngFor","ngForOf"],["class","category",4,"ngFor","ngForOf"],[1,"hero"],[1,"hero-content"],[1,"button-group"],[1,"play-button",3,"click"],["class","play-button",3,"click",4,"ngIf"],["draggable","false",3,"click","src","alt"],[1,"category"]],template:function(e,n){e&1&&h(0,X,14,6,"ng-container",1),e&2&&c("ngIf",n.categories.length)},dependencies:[S,E,L,D],styles:[".hero-background[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;transform:translate(-50%);width:100%;max-width:1440px;height:54vw;max-height:800px;z-index:-1}.dashboard-content[_ngcontent-%COMP%]{position:relative;max-width:1440px;margin:0 auto;padding-left:96px;box-sizing:border-box;z-index:1}.dashboard-content[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;min-height:400px;max-height:800px;box-sizing:border-box;overflow:hidden}.dashboard-content[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{width:100%;max-width:440px;color:#fff;text-shadow:0 0 10px rgba(0,0,0,.7)}.dashboard-content[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{height:48px;background-color:#2e3edf;border:none;border-radius:40px;padding-inline:24px;padding-block:12px;gap:10px;font-size:18px;font-weight:700;color:#fff;display:flex;align-items:center}.dashboard-content[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]:hover{background-color:#3d4dfc;cursor:pointer}.dashboard-content[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]{padding:20px;color:#fff}.dashboard-content[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:16px;padding-bottom:10px;-webkit-overflow-scrolling:touch;padding-inline-end:150px;-ms-overflow-style:none;scrollbar-width:none}.dashboard-content[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.dashboard-content[_ngcontent-%COMP%]   .category[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:213px;height:120px;flex-shrink:0;object-fit:cover;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-user-drag:none}.dashboard-content[_ngcontent-%COMP%]   .first-category[_ngcontent-%COMP%]{margin-top:60px}h1[_ngcontent-%COMP%]{text-wrap:auto;font-size:88px;width:60vw}p[_ngcontent-%COMP%]{font-size:16px}.carousel[_ngcontent-%COMP%]{display:flex;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.carousel[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]{max-width:1440px;width:100%}.right-gradient[_ngcontent-%COMP%]{position:absolute;top:85px;right:0;width:200px;height:calc(100% - 91px);background:linear-gradient(88.67deg,#14141400 1.13%,#141414 48.04%);pointer-events:none;z-index:0}.content-with-gradient[_ngcontent-%COMP%]{position:relative;z-index:1}.carousel[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}h2[_ngcontent-%COMP%]{font-size:22px}@media (max-width: 900px){h1[_ngcontent-%COMP%]{font-size:64px}}@media (max-width: 720px){.right-gradient[_ngcontent-%COMP%]{display:none}.dashboard-content[_ngcontent-%COMP%]{padding-inline:16px}.category[_ngcontent-%COMP%]{padding:0 0 32px!important}.hero-background[_ngcontent-%COMP%]{display:none}.hero[_ngcontent-%COMP%]{display:none!important}h2[_ngcontent-%COMP%]{font-size:20px}}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem}.play-button[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;font-size:1rem;padding:.8rem 1.5rem;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s}.play-button[_ngcontent-%COMP%]:hover{background-color:#f40612}"]})};export{F as Dashboard};
