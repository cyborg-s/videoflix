import{a as N}from"./chunk-5DBMA7CM.js";import{a as R,b as W,c as j,d as D,e as z,f as F,g as Z,h as q}from"./chunk-UAN5FHOK.js";import{e as V,g as k,r as I,t as A}from"./chunk-EXH2BBGN.js";import{Da as b,Ha as S,Ka as O,Qa as g,Ra as i,Sa as o,Ta as p,Wa as f,Xa as m,Ya as u,Z as c,_ as d,bb as h,cb as x,db as T,eb as v,fb as C,gb as P,hb as y,qb as E,sa as M,ta as s,ya as _}from"./chunk-AMTD2DMX.js";function U(a,t){if(a&1){let n=f();i(0,"article",14),p(1,"article",15),i(2,"main"),p(3,"img",16),i(4,"p"),h(5),o(),i(6,"aside")(7,"img",17),m("click",function(){c(n);let r=u();return d(r.closeToast())}),o()()()()}if(a&2){let n=u();s(5),x(n.errorMessage)}}function L(a,t){if(a&1){let n=f();i(0,"article",18),p(1,"article",19),i(2,"main"),p(3,"img",16),i(4,"p"),h(5),o(),i(6,"button",20),m("click",function(){c(n);let r=u();return d(r.onSuccessToastOk())}),h(7,"OK"),o(),i(8,"aside")(9,"img",17),m("click",function(){c(n);let r=u();return d(r.closeToast())}),o()()()()}if(a&2){let n=u();s(5),x(n.successMessage)}}function G(a,t){if(a&1&&(i(0,"div",21),p(1,"img",22),h(2),o()),a&2){let n=u();s(2),T(" ",n.passwordError," ")}}var B=class a{constructor(t,n,e,r,w){this.route=t;this.router=n;this.authService=e;this.cdr=r;this.ngZone=w}email="";password="";repeatedPassword="";showPassword=!1;showErrorToast=!1;errorMessage="";showSuccessToast=!1;successMessage="";passwordError="";ngOnInit(){this.route.queryParams.subscribe(t=>{this.email=t.email||""})}togglePasswordVisibility(){this.showPassword=!this.showPassword}signUp(){if(this.passwordError="",this.showErrorToast=!1,this.password!==this.repeatedPassword){this.passwordError="Passwords must match.",this.cdr.detectChanges();return}this.authService.register(this.email,this.password,this.repeatedPassword).subscribe({next:t=>{this.passwordError="",this.showSuccessToastWithButton(t.message||"Registration successful. Please confirm your email.")},error:t=>{let n="";if(t.error&&typeof t.error=="object"){let e=[];for(let r in t.error)Array.isArray(t.error[r])?e.push(...t.error[r]):typeof t.error[r]=="string"&&e.push(t.error[r]);n=e.join(" ")}else typeof t.error=="string"&&(n=t.error);n?this.showToast(n):this.showToast("Please check your inputs and try again.")}})}showToast(t){this.ngZone.run(()=>{this.errorMessage=Array.isArray(t)?t[0]:t,this.showErrorToast=!0,this.cdr.detectChanges()})}closeToast(){this.showErrorToast=!1,this.cdr.detectChanges()}showSuccessToastWithButton(t){this.ngZone.run(()=>{this.successMessage=Array.isArray(t)?t[0]:t,this.showSuccessToast=!0,this.cdr.detectChanges()})}onSuccessToastOk(){this.showSuccessToast=!1,this.cdr.detectChanges(),this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||a)(_(I),_(A),_(N),_(E),_(O))};static \u0275cmp=b({type:a,selectors:[["app-signup"]],decls:21,vars:13,consts:[["signupForm","ngForm"],[1,"signup-container"],["class","toast",4,"ngIf"],["class","toast toastSuccess",4,"ngIf"],[3,"ngSubmit"],[1,"input-group"],["src","../../assets/img/mail.svg","alt","email icon"],["type","email","name","email","placeholder","Email Address","required","",3,"ngModelChange","ngModel"],["src","../../assets/img/password.svg","alt","password icon"],["name","password","placeholder","Enter a password","required","",3,"ngModelChange","type","ngModel"],["alt","toggle visibility",1,"toggle-icon",3,"click","src"],["name","repeatedPassword","placeholder","Confirm Password","required","",3,"ngModelChange","type","ngModel"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[1,"toast"],[1,"error"],["src","../../assets/img/ExclamationCircleFill.svg","alt",""],["src","../../assets/img/close_small.svg","alt","",3,"click"],[1,"toast","toastSuccess"],[1,"success"],[3,"click"],[1,"error-message"],["src","../../assets/img/warning.svg","alt","",1,"warning"]],template:function(n,e){if(n&1){let r=f();i(0,"div",1)(1,"h1"),h(2,"SignUp"),o(),S(3,U,8,1,"article",2)(4,L,10,1,"article",3),i(5,"form",4,0),m("ngSubmit",function(){return c(r),d(e.signUp())}),i(7,"div",5),p(8,"img",6),i(9,"input",7),P("ngModelChange",function(l){return c(r),C(e.email,l)||(e.email=l),d(l)}),o()(),i(10,"div",5),p(11,"img",8),i(12,"input",9),P("ngModelChange",function(l){return c(r),C(e.password,l)||(e.password=l),d(l)}),o(),i(13,"img",10),m("click",function(){return c(r),d(e.togglePasswordVisibility())}),o()(),i(14,"div",5),p(15,"img",8),i(16,"input",11),P("ngModelChange",function(l){return c(r),C(e.repeatedPassword,l)||(e.repeatedPassword=l),d(l)}),o(),i(17,"img",10),m("click",function(){return c(r),d(e.togglePasswordVisibility())}),o()(),S(18,G,3,1,"div",12),i(19,"button",13),h(20," Get Started "),o()()()}n&2&&(s(3),g("ngIf",e.showErrorToast),s(),g("ngIf",e.showSuccessToast),s(5),v("ngModel",e.email),s(3),g("type",e.showPassword?"text":"password"),v("ngModel",e.password),s(),g("src",y("../../assets/img/",e.showPassword?"visibility_off":"visibility",".svg"),M),s(3),g("type",e.showPassword?"text":"password"),v("ngModel",e.repeatedPassword),s(),g("src",y("../../assets/img/",e.showPassword?"visibility_off":"visibility",".svg"),M),s(),g("ngIf",e.passwordError),s(),g("disabled",!e.email||!e.password||!e.repeatedPassword))},dependencies:[q,F,R,W,j,Z,z,D,k,V],styles:["div[_ngcontent-%COMP%]{border-radius:48px;background-color:#1b1b22d9;height:auto;width:calc(100vw - 144px);max-height:410px;max-width:408px;display:flex;flex-direction:column;align-items:center;padding-inline:56px;padding-block:43px}div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#fff}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:32px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-direction:row;height:24px;max-width:408px;border:1px solid #2e3edf;border-radius:12px;padding-inline:24px;padding-block:12px;display:flex;align-items:center;gap:12px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:24px;width:24px}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:none;outline:none;color:#d3d3d3;font-size:18px;font-weight:400;width:100%}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#d3d3d3}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px;width:152px;background-color:#2e3edf;border:none;border-radius:40px;padding-inline:24px;padding-block:12px;gap:10px;font-size:18px;font-weight:700;color:#fff}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#666;cursor:not-allowed}div[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{border:none;background-color:transparent;height:10px;color:#ff4d4f;padding:0;margin:-21px -21px -21px -65px}.warning[_ngcontent-%COMP%]{height:12px!important;width:auto!important}@media (max-width: 720px){h1[_ngcontent-%COMP%]{font-size:40px!important}}"]})};export{B as Signup};
